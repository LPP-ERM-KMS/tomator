

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Usage &mdash; tomator 1D 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=8d563738"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Coupled Power Functions" href="RF%20power.html" />
    <link rel="prev" title="Installation" href="Installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html">
            
              <img src="_static/logocolor.svg" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="Installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Usage</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#defining-and-running-a-simulation-simulationinterface-py">Defining and running a simulation: SimulationInterface.py</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-a-simulation-using-the-binary-directly">Running a simulation: using the binary directly</a></li>
<li class="toctree-l2"><a class="reference internal" href="#overview-of-the-simulation-plotterinterface-py">Overview of the simulation: PlotterInterface.py</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="RF%20power.html">Coupled Power Functions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">tomator 1D</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Usage</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/Usage.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Link to this heading"></a></h1>
<p>Tomator 1D is a standalone binary which may be
interfaced using python through software located in the ‘gui’ folder. Their functionalities are discussed below</p>
<section id="defining-and-running-a-simulation-simulationinterface-py">
<h2>Defining and running a simulation: SimulationInterface.py<a class="headerlink" href="#defining-and-running-a-simulation-simulationinterface-py" title="Link to this heading"></a></h2>
<p>We will describe the software in this section but for those interested there is
also a video introduction that can be found here: <a class="reference external" href="https://youtu.be/qyPUr26huhY">https://youtu.be/qyPUr26huhY</a></p>
<p>To run the software you need a python venv containing pandas.
With this environment you may run the software as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">SimulationInterface</span>
</pre></div>
</div>
<p>This will show an interface with two options:</p>
<ul class="simple">
<li><p>Define Parameters</p></li>
<li><p>Select Pre-defined Parameters</p></li>
</ul>
<p>The parameters are defined in a json file which may be created using the first option or loaded using
the second option, example files are located in examples/InputFiles. When clicking on “define parameters” you will be presented with a dialog where you may specify the various parameters such as:</p>
<ul class="simple">
<li><dl class="simple">
<dt>Main discharge</dt><dd><ul>
<li><dl class="simple">
<dt>Magnetic field</dt><dd><p>Define the tangential, vertical and horizontal magnetic field size</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Toroidal machine geometry</dt><dd><p>Define the major radius R, and the two minor radii a and b. You may also define
the limiter extension and the HFS (High Field Side), at the LFS and how many there are
(nlimitors). Finally specify the plasma volume (vpl)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Neutral pressure</dt><dd><p>The pressures of the various gasses (Helium and dihydrogen)</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Coupled (RF) power</dt><dd><p>Coupled power functions specify where the power goes, for more info and how
to add your own see <a class="reference internal" href="RF%20power.html"><span class="doc">Coupled Power Functions</span></a></p>
<ul>
<li><dl class="simple">
<dt>RF power</dt><dd><p>Specify the amount of power (Prf), it’s frequency (freq) and the time it takes
to ramp up the power (dtpramp)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Types of RF power</dt><dd><ul>
<li><dl class="simple">
<dt>proptone</dt><dd><p>deposits power proportional to the electron density, it is also the simplest example.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>nefix</dt><dd><p>Tunes the coupled power for a fixed density at IC</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>fixpowerfrac</dt><dd><p>Couples a fixed fraction of the launched power</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>blhr</dt><dd><p>Couples a fixed fraction of the launched power (lower hybrid resonance)</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>bTOMAS</dt><dd><p>deposition on ECR, built to fit the TOMAS machine, using the budden method.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>bmanuel</dt><dd><p>Deposition on ECR, done by Manuel</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ECH</dt><dd><ul>
<li><dl class="simple">
<dt>general EC</dt><dd><p>Define parameters which are considered “generally applicable” such as
the position of power deposition Rdep, the power of EC that was
absorbed pecabs0, the width of the ECH widthech, the background ECH
echbackground, the harmonic number (e.g 2) and the losses to the wall
muw.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>necfix</dt><dd><p>parameters relevant if nefix was chosen prior, the parameters are the vertex of interest ‘ic’,
the fixed density necfix, the initial power Pini and a tunable error variable tauP.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>TOMAS</dt><dd><p>Multiple power locations and the corresponding fractions.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>ICH</dt><dd><ul>
<li><dl class="simple">
<dt>general IC</dt><dd><p>As with general EC, parameters which are considered “generally applicible” which here is the
antenna position Rant, the antenna vacuum resistance avlr and wether to use it bantlr.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>LHR</dt><dd><p>Parameters concerning the blhr type, the fraction of power going to the electrons fracpne,
the fraction going to the lower hybrid fraclhr, the with of the lower hybrid widthlhr, the
background lower hybrid and HtoHD, how much power gets transferred from hydrogen to deuterium.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>OTHER</dt><dd><p>a fixed temperature for which a csv file containing the dependency may be given.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Transport</dt><dd><ul>
<li><dl class="simple">
<dt>Diffusion</dt><dd><p>Here you may choose between bDfix,bDbohm and bDscaling as outlined in the original paper,
defining either the diffusion value if fixed or the factor if bohm or scaling.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Convection</dt><dd><p>Similar to diffusion, here you may choose inbetween fixed vertical diffusion or scaling
diffusion with veq being which equation you choose for this (5 or 8).</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Tune D and V</dt><dd><p>This is the opposite of the previous two options, instead of defining
the diffusion and convection directly, you tune them so at vertex il
the electron density should be a specified value and same with ir</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Conditions</dt><dd><ul>
<li><dl class="simple">
<dt>Physics to include</dt><dd><p>All the molecular physics mentioned in the paper, hydrogen, dihydrogen,
helium, ions, charge exchange, elastic scattering, coulomb scattering,
impurities, transport ions, transport neutrals, edge particles, poloidal
drift, vertical drift and collisionality.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Initial conditions</dt><dd><p>From what the simulation is started, such as the various densities of the species
present in the plasma and the initial temperature and densities of the electrons.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Edge conditions</dt><dd><p>if edge physics was selected in the physics tab this governs the edge physics equations
from the paper.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Simulation control settings</dt><dd><ul>
<li><dl class="simple">
<dt>Simulation grid</dt><dd><p>The amount of meshpoints</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Input file</dt><dd><p>Continue on from a previous tomator simulation, this might be useful as an initial simulation
most often starts from non-physical initial conditions as defined by the user, if you start
from a possible scenario the stable solution arrives faster.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Time step</dt><dd><p>the initial time, at what time the main ends (if no -t flag was given directly to the binary)
and the parameters needed for adaptive time stepping</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Time step for RF coupling</dt><dd><p>As RF simulations can be slow, it is useful to run them in a different time scenario.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Output parameters</dt><dd><p>Specify to either save every N loops or every dtsave seconds.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Solver parameters</dt><dd><p>The simulation will adaptively refine until the difference between
densities is less then this tolerance.</p>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
<p>You may also modify an existing json file by first choosing “Load Defaults”, then modifying the required variables. Having filled in all the necessary entries you may save the inputs with “Save to JSON”.
Which may then be loaded with “Select Pre-defined Parameters” and ran.</p>
<p>The output will be generated in a folder Data, one layer above the folder in
which you started the simulation, as you ran the gui this will be in the tomator folder.</p>
</section>
<section id="running-a-simulation-using-the-binary-directly">
<h2>Running a simulation: using the binary directly<a class="headerlink" href="#running-a-simulation-using-the-binary-directly" title="Link to this heading"></a></h2>
<p>The binary takes as a required argument the json file, a simulation can thus be
ran in the terminal as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Tomator1D</span> <span class="n">TCV5151X_fixneDV</span><span class="o">.</span><span class="n">json</span>
</pre></div>
</div>
</section>
<section id="overview-of-the-simulation-plotterinterface-py">
<h2>Overview of the simulation: PlotterInterface.py<a class="headerlink" href="#overview-of-the-simulation-plotterinterface-py" title="Link to this heading"></a></h2>
<p>A simulation may take quite some time, to track the progress a python script called PlotterInterface
was developed, which also has a video introduciton: <a class="reference external" href="https://youtu.be/1ATl7nQellM">https://youtu.be/1ATl7nQellM</a>, you run it as:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">python</span> <span class="n">PlotterInterface</span>
</pre></div>
</div>
<p>Now you have the option “Plot Simulation” which you may direct to the generated csv file in
Data/yourjsonfilename/, having done this a browser will open showing the current status of your
simulation, to terminate this plotting server click on “Terminate Server”, whereby you are
given a list of active servers you may terminate.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="RF%20power.html" class="btn btn-neutral float-right" title="Coupled Power Functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright EUPL1.2, T. Wauters, A. Adriaens, J. Buermans, S. Deshpande, D. Lopez.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>